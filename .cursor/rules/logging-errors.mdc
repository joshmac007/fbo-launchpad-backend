---
description: Logging errors, documenting errors, issue, fixes
globs: 
alwaysApply: false
---
# Error Logging Guidelines

Log errors in the docs/error-documentation.md file.

## 1. Use Appropriate Severity Levels
- **ERROR**: For unrecoverable failures or exceptions that need immediate attention.
- **WARN**: For unexpected states or recoverable issues that may need review.
- **INFO**: For high-level application flow events (e.g., startup, shutdown).
- **DEBUG**: For detailed diagnostic information during development.

## 2. Structured and Contextual Logging
- Log in a structured format (JSON or key-value) to enable searching and filtering.
- Include contextual metadata:
  - Request or correlation IDs
  - User or session identifiers (when available)
  - Function or module names
  - Timestamps (use ISO 8601 UTC)

## 3. Clear and Actionable Messages
- Write log messages that describe **what** happened and **why**, not just **where**.
- Include variable values and state that led to the error.
- Avoid generic messages like "An error occurred." Instead:
  ```js
  logger.error('Failed to fetch orders', { userId, orderCount, error });
  ```

## 4. Avoid Sensitive Data Leakage
- Do not log passwords, tokens, PII, or other sensitive data.
- Mask or omit any fields that contain sensitive information.

## 5. Centralize Logging Configuration
- Configure log levels, formats, and transports in a shared module or config file (e.g., `src/utils/logger.ts`).
- Use a consistent logger instance across the codebase.

## 6. Error Propagation
- Catch and log errors at the boundary (e.g., controllers, API routes), then rethrow or return appropriate responses.
- Avoid swallowing errors silently.

## 7. Monitoring and Alerts
- Integrate with external monitoring tools (e.g., Sentry, Datadog) for critical errors.
- Attach stack traces and breadcrumbs when reporting.

## 8. Testing and Validation
- Write unit tests to simulate error conditions and verify that logs are emitted at the right level with the correct message.

*Document last updated: YYYY-MM-DD*
